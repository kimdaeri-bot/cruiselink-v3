<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„ ë°• ëª©ë¡ - í¬ë£¨ì¦ˆë§í¬</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš¢</text></svg>">
</head>
<body>
  <div id="header"></div>

  <section class="hero" style="padding: 48px 0 60px;">
    <div class="container">
      <h1>í¬ë£¨ì¦ˆ ì„ ë°•</h1>
      <p>MSC Cruises & Norwegian Cruise Line â€” ì´ 47ì²™ì˜ ì„ ë°•ì„ ë§Œë‚˜ë³´ì„¸ìš”</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div style="display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap">
        <button class="btn btn-navy btn-sm" onclick="filterShips('')" id="btn-all">ì „ì²´</button>
        <button class="btn btn-outline btn-sm" style="color:var(--navy);border-color:var(--gray-300)" onclick="filterShips('MSC')" id="btn-msc">MSC Cruises</button>
        <button class="btn btn-outline btn-sm" style="color:var(--navy);border-color:var(--gray-300)" onclick="filterShips('NCL')" id="btn-ncl">Norwegian Cruise Line</button>
      </div>
      <div id="shipGrid" class="ship-grid">
        <div class="loading"><div class="loading-spinner"></div><p>ì„ ë°• ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>
      </div>
    </div>
  </section>

  <div id="ctaSection"></div>
  <div id="footer"></div>

  <script src="assets/data/translations.js"></script>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/components.js"></script>
  <script>
    document.getElementById('header').innerHTML = Components.header('ships');
    document.getElementById('footer').innerHTML = Components.footer();
    document.getElementById('ctaSection').innerHTML = Components.ctaSection();

    let allShips = [];

    async function loadShips() {
      const grid = document.getElementById('shipGrid');
      try {
        allShips = await API.loadLocalShips();
        renderShips('');
      } catch (e) {
        grid.innerHTML = '<div class="empty-state"><span class="emoji">âš ï¸</span><p>ì„ ë°• ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p></div>';
      }
    }

    function renderShips(filter) {
      const grid = document.getElementById('shipGrid');
      const filtered = filter ? allShips.filter(s => s.operatorShort === filter) : allShips;

      grid.innerHTML = filtered.map(s => `
        <div class="ship-card" onclick="location.href='ship-detail.html?slug=${s.slug}'">
          <div class="ship-card-img">
            <img src="${s.coverImage}" alt="${s.title}" loading="lazy" onerror="this.parentElement.innerHTML='<div style=\\'height:180px;display:flex;align-items:center;justify-content:center;font-size:3rem;background:var(--gray-100)\\'>ğŸš¢</div>'">
          </div>
          <div class="ship-card-body">
            <h3>${s.title}</h3>
            <div class="ship-class">${s.operator} Â· ${s.shipClass}</div>
            <div class="ship-card-specs">
              <div class="spec">ì·¨í•­ <strong>${s.launchYear || '-'}</strong></div>
              <div class="spec">ì •ì› <strong>${s.capacity ? s.capacity.toLocaleString() : '-'}</strong></div>
              <div class="spec">ë°í¬ <strong>${s.deckCount || '-'}ê°œ</strong></div>
              <div class="spec">í†¤ìˆ˜ <strong>${s.grossTonnage ? (s.grossTonnage/1000).toFixed(0) + 'K' : '-'}</strong></div>
            </div>
            <div style="margin-top:8px;font-size:0.85rem;color:var(--orange)">ğŸš¢ ${s.cruiseCount}ê°œ í¬ë£¨ì¦ˆ</div>
          </div>
        </div>`).join('');

      document.querySelectorAll('[id^="btn-"]').forEach(b => {
        b.className = 'btn btn-sm ' + (
          (filter === '' && b.id === 'btn-all') ||
          (filter === 'MSC' && b.id === 'btn-msc') ||
          (filter === 'NCL' && b.id === 'btn-ncl')
            ? 'btn-navy' : 'btn-outline'
        );
        if (!b.classList.contains('btn-navy')) b.style.cssText = 'color:var(--navy);border-color:var(--gray-300)';
        else b.style.cssText = '';
      });
    }

    function filterShips(filter) { renderShips(filter); }

    loadShips();
  </script>
</body>
</html>
